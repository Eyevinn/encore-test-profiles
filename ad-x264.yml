name: ad-x264
description: Ad profile
scaling: bicubic # lanczos might e better, but has a performance impact
encodes:
  - type: X264Encode
    suffix: _x264_#{profileParams['fps']?:"25"}_crf_#{profileParams['crf']?:23}
    twoPass: false # Might want 2-pass, we'll see
    height: 1080
    params:
      b:v: 5000k
      maxrate: 7500k
      bufsize: 10000k
      r: #{profileParams['fps']?:25}
      fps_mode: cfr
      pix_fmt: yuv420p
      tag:v: avc1
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: high
      level: 4.1
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      keyint: 192
      keyint_min: 96
      me: hex
      merange: 16
      cabac: 1
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
  - type: X264Encode
    suffix: _x264_#{profileParams['fps']?:"25"}_crf_#{profileParams['crf']?:23}
    twoPass: false # Might want 2-pass, we'll see
    height: 720
    params:
      b:v: 2500k
      maxrate: 3750k
      bufsize: 5000k
      r: #{profileParams['fps']?:25}
      fps_mode: cfr
      pix_fmt: yuv420p
      tag:v: avc1
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: high
      level: 4.1
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      keyint: 192
      keyint_min: 96
      me: hex
      merange: 16
      cabac: 1
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
  - type: X264Encode
    suffix: _x264_#{profileParams['fps']?:"25"}_crf_#{profileParams['crf']?:23}
    twoPass: false # Might want 2-pass, we'll see
    height: 540
    params:
      b:v: 1500k
      maxrate: 2250k
      bufsize: 3000k
      r: #{profileParams['fps']?:25}
      fps_mode: cfr
      pix_fmt: yuv420p
      tag:v: avc1
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: high
      level: 3.1
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      keyint: 192
      keyint_min: 96
      me: hex
      merange: 16
      cabac: 1
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
  - type: X264Encode
    suffix: _x264_#{profileParams['fps']?:"25"}_crf_#{profileParams['crf']?:23}
    twoPass: false # Might want 2-pass, we'll see
    height: 432
    params:
      b:v: 1000k
      maxrate: 1500k
      bufsize: 2000k
      r: #{profileParams['fps']?:25}
      fps_mode: cfr
      pix_fmt: yuv420p
      tag:v: avc1
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: high
      level: 3.1
    x264-params:
      deblock: 0,0
      aq-mode: 1
      aq-strength: 1.0
      keyint: 192
      keyint_min: 96
      me: hex
      merange: 16
      cabac: 1
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
